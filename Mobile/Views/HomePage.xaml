<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Mobile.Views.HomePage"
             BackgroundColor="#ECECF6"
             Shell.NavBarIsVisible="False"
             x:Name="PaiPage"
             Title="HomePage">
    
    <ScrollView>
        <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto">
            <!--<Border
                HorizontalOptions="End"
                VerticalOptions="End"
                Margin="0,0,10,5"
                BackgroundColor="#ECECF6" 
                WidthRequest="60" 
                HeightRequest="60" 
                StrokeShape="RoundRectangle 30">
                <Button
                    Command="{Binding AddCard}"
                    CommandParameter="Movie"
                    Text="+"
                    TextColor="Black"
                    FontSize="40"
                    FontAttributes="Bold"
                    BackgroundColor="#D9D9ED"/>
            </Border>-->

            <Label
                Grid.Row="0"
                Text="Livros com maior nota"
                Style="{StaticResource Title}"/>
            <CollectionView Grid.Row="1" 
                            ItemsSource="{Binding Movies}" 
                            HorizontalOptions="StartAndExpand">
                <CollectionView.ItemsLayout>
                    <GridItemsLayout Orientation="Vertical" Span="4" VerticalItemSpacing="20"/>
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate >
                        <Border 
                            Style="{StaticResource BorderCard}">
                            <Grid RowDefinitions="253,*" ColumnDefinitions="*,Auto" RowSpacing="0">
                                <Image
                                    Grid.Row="0"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="2"
                                    Source="{Binding Image}" 
                                    Style="{StaticResource ImageCard}"/>

                                <Border
                                    Grid.Row="0"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="2"
                                    Style="{StaticResource BorderDeleteCard}">
                                    <Border.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding BindingContext.DeleteCommand,Source={x:Reference PaiPage}}" 
                                                              CommandParameter="{Binding Id}"/>
                                    </Border.GestureRecognizers>
                                    <Image
                                        Source="icon_delete.png"
                                        Style="{StaticResource ImageIconDeleteCard}">
                                    </Image>
                                </Border>
                                <VerticalStackLayout Grid.Row="1" Margin="10,7,0,5">
                                    <Label Text="{Binding Assessment,StringFormat='Nota: {0}'}" Style="{StaticResource TItleCard}"/>
                                    <Label Text="{Binding Duration,StringFormat='Duração: {0}'}" Style="{StaticResource TItleCard}"/>
                                    <Label Text="{Binding Concluded,StringFormat='Cocluido: {0}'}" Style="{StaticResource TItleCard}"/>
                                </VerticalStackLayout>
                                <HorizontalStackLayout Grid.Row="1" Grid.Column="1">
                                    <Border
                                        Style="{StaticResource BorderDetalhesCard}">
                                        <Border.GestureRecognizers>
                                            <TapGestureRecognizer 
                                                Command="{Binding BindingContext.DetailCommand,Source={x:Reference PaiPage}}" 
                                                CommandParameter="{Binding .}"/>
                                        </Border.GestureRecognizers>
                                        <Image
                                            Source="icon_detalhes.png"
                                            Style="{StaticResource ImageIconDetalhesCard}">
                                        </Image>

                                    </Border>
                                    <Border
                                        Style="{StaticResource BorderEditCard}">
                                        <Image
                                            Source="icon_edit.png"
                                            Style="{StaticResource ImageIconEditCard}"/>
                                    </Border>
                                </HorizontalStackLayout>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Grid>
    </ScrollView>
</ContentPage>